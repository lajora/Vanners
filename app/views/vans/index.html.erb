<div class="container">
  <div class="header">
    <h1>Browse vans</h1>
  </div>

  <div>
    <%= form_tag vans_path, method: :get, class: "search-box" do %>
      <div class="sb search-from">
        <h2>from</h2>
        <input name="date_from", class="ymd", type="date", value=<%= @date_from %>>
      </div>
      <div class="sb search-to">
        <h2>to</h2>
        <input name="date_to", class="ymd", type="date", value=<%= @date_to %>>
      </div>
      <div class="sb search-city">
        <h2>city</h2>
        <%= text_field_tag :query,
          params[:query],
          class: "ymd",
          placeholder: "My location"
        %>
      </div>
      <%= submit_tag "Search", class: "btn btn-book" %>
    <% end %>
  </div>

  <div data-controller="toggle-view">
    <div class="d-flex justify-content-between align-items-end">
      <h3>Available vans</h3>
      <button class="btn btn-toggle-view" data-action="click->toggle-view#switchView" data-toggle-view-target="button">Map view</button>
    </div>

    <div data-toggle-view-target="cards">
      <div class="cards">
        <% if @vans.empty? %>
          <p><em>There are no vans available for your search</em></p>
        <% else %>
          <% @vans.each do |van| %>
            <%= link_to van_path(van, date_from: @date_from, date_to: @date_to) do %>
              <div class="van-card">
                <div class="i"><%= image_tag "van1.jpg"%></div>
                <h4><%= van.title %> - â‚¬<%= van.price %> </h4>
                <p><%= truncate(van.description, :length => 70) %> </p>
                <br>
              </div>
            <% end %>
          <% end %>
        <% end %>
      </div>
    </div>
    <div data-toggle-view-target="map" class="map-area invisible">
      <%= render "shared/map" %>
    </div>
  </div>
</div>
